<body>

    <main class="main-wrap">

        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Users Details</h2>
                    <p></p>
                </div>
                <div>
                    {{!-- <a href="#" class="btn btn-light rounded font-md">Export</a>
                    <a href="#" class="btn btn-light rounded  font-md">Import</a> --}}
                    {{!-- <a href="/admin/adduser" class="btn btn-secondary btn-sm rounded">Add new user</a> --}}
                </div>
            </div>
            <div class="card mb-4">
                <header class="card-header">
                    <div class="row align-items-center">

                        <div class="col-md-3 col-12 me-auto mb-md-0 mb-3">
                            {{!-- <select class="form-select">
                                <option selected>All category</option>
                                <option>Electronics</option>
                                <option>Clothes</option>
                                <option>Automobile</option>
                            </select> --}}
                        </div>
                        {{!-- <div class="col-md-2 col-6">
                            <input type="date" value="02.05.2021" class="form-control">
                        </div> --}}
                        <div class="col-md-2 col-6">
                            <a href="/admin//viewdeletedusers" >
                                <h7>Deleted users</h7>
                            </a>



                            {{!-- <select class="form-select">
                                <option selected>Status</option>
                                <option>Active</option>
                                <option>Blocked</option>
                                <option>Deleted</option>
                                <option selected>Show all</option>
                            </select> --}}
                        </div>
                    </div>
                </header> <!-- card-header end// -->

                {{!-- deleted Users Modal --}}
                {{!-- <div class="modal fade" id="deleted-users-modal" tabindex="-1" role="dialog"
                    aria-labelledby="contact-modal-label" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="contact-modal-label">Contact Us</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <th>Name:</th>
                                            <td>John Doe</td>
                                        </tr>
                                        <tr>
                                            <th>Email:</th>
                                            <td>johndoe@example.com</td>
                                        </tr>
                                        <tr>
                                            <th>Phone:</th>
                                            <td>555-1234</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div> --}}



                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Sl.no</th>
                            <th scope="col">Name</th>
                            <th scope="col text-center">Email</th>
                            {{!-- <th scope="col text-center">Description</th> --}}
                            <th scope="col text-center">Phone</th>
                            <th scope="col">Status</th>
                            <th scope="col">Date Created</th>

                            <th scope="col text-center">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each users}}
                        <tr>
                            <th scope="row">{{incrementedIndex @index}}</td>
                            <th scope="row">{{this.name}}</td>
                            <td>{{this.email}}</td>
                            <td>{{this.phone}}</td>
                            <td> <span>{{#if
                                    this.access}}Active{{else}}Blocked{{/if}}</span></td>
                            <td>{{this.createdAt}}</td>
                            <td>

                                <div class="col-lg-2 col-sm-1 col-4 text-end">
                                    <div class="btn-group">
                                        <a class="btn btn-sm btn-outline-primary" href="/admin/updateuser/{{this._id}}">
                                            <i class="bi bi-pencil"></i> Edit
                                        </a>
                                        <a class="btn btn-sm btn-outline-primary"
                                            onclick="confirmDelete('{{this._id}}')" href="#">
                                            <i class="bi bi-pencil"></i> Delete
                                        </a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {{/each}}

                    </tbody>
                </table>


            </div> <!-- card-body end// -->
            </div> <!-- card end// -->
            {{!-- <div class="pagination-area mt-30 mb-50">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-start">
                        <li class="page-item active"><a class="page-link" href="#">01</a></li>
                        <li class="page-item"><a class="page-link" href="#">02</a></li>
                        <li class="page-item"><a class="page-link" href="#">03</a></li>
                        <li class="page-item"><a class="page-link dot" href="#">...</a></li>
                        <li class="page-item"><a class="page-link" href="#">16</a></li>
                        <li class="page-item"><a class="page-link" href="#"><i
                                    class="material-icons md-chevron_right"></i></a></li>
                    </ul>
                </nav>
            </div> --}}
        </section> <!-- content-main end// -->

    </main>


    <script>
        function confirmDelete(userId) {
            if (window.confirm('Are you sure you want to delete this user?')) {
                $.ajax({
                    url: '/admin/userdelete/' + userId,
                    method: 'DELETE',
                    success: function () {
                        alert('User deleted successfully!');
                        location.reload(); // reload the page after delete
                    },
                    error: function () {
                        alert('Error deleting user!');
                    }
                });
            }
        }
    </script>

</body>